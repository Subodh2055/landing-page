<!-- Mobile Header -->
<div class="mobile-header d-lg-none">
  <div class="mobile-title">
    <h2 class="fw-bold text-dark">
      <i class="fas fa-th-large me-2"></i>
      {{ currentUser ? 'Your Products' : 'Public Products' }}
    </h2>
    <p class="text-muted">
      {{ currentUser ? 'Access your role-based product collection' : 'Browse our public product catalog' }}
    </p>
  </div>
  <div class="mobile-actions" *ngIf="currentUser && hasRole('admin')">
    <a routerLink="/admin" class="btn btn-primary btn-sm">
      <i class="fas fa-plus me-1"></i>Add Product
    </a>
  </div>
</div>

<!-- Mobile Filter Toggle (Hidden since navbar handles it) -->
<div class="mobile-filter-toggle d-lg-none mb-3" *ngIf="!loading && products.length > 0" style="display: none;">
  <button class="btn btn-outline-primary btn-sm" (click)="onToggleMobileFilters()">
    <i class="fas fa-bars me-1"></i>Filters
    <span class="badge bg-primary ms-1" *ngIf="hasActiveFilters()">{{ getActiveFilterCount() }}</span>
  </button>
  <span class="text-muted ms-2" *ngIf="hasActiveFilters()">
    {{ filteredProducts.length }} of {{ products.length }} products
  </span>
</div>

<!-- Mobile Sidebar -->
<div class="mobile-sidebar" [class.active]="showMobileFilters" (click)="$event.stopPropagation()">
  <div class="sidebar-overlay" (click)="onCloseMobileFilters()"></div>
  <div class="sidebar-content" (click)="$event.stopPropagation()">
    <app-sidebar
      [availableCategories]="availableCategories"
      [selectedCategories]="selectedCategories"
      [priceRange]="priceRange"
      [maxPrice]="maxPrice"
      [inStockOnly]="inStockOnly"
      [sortBy]="sortBy"
      [hasActiveFilters]="hasActiveFilters()"
      [isMobile]="true"
      (categoryChange)="onCategoryChange($event)"
      (priceRangeChange)="onPriceRangeChange($event)"
      (stockChange)="onStockChange($event)"
      (sortChange)="onSortChange($event)"
      (clearAll)="onClearMobileFilters()"
      (removeCategory)="onRemoveCategoryFilter($event)"
      (clearPrice)="onClearPriceFilter()"
      (removeStock)="onRemoveStockFilter()">
    </app-sidebar>
  </div>
</div>

<!-- Mobile Product Grid -->
<div class="product-grid-mobile d-lg-none" *ngIf="!loading && paginatedProducts.length > 0">
  <div class="product-card" *ngFor="let product of paginatedProducts; trackBy: trackByProduct">
    <app-product-card [product]="product"></app-product-card>
  </div>
</div>

<!-- Mobile Loading State -->
<div class="row d-lg-none" *ngIf="loading">
  <div class="col-12 text-center">
    <div class="spinner mx-auto"></div>
    <p class="text-dark mt-3">Loading products...</p>
  </div>
</div>

<!-- Mobile No Products State -->
<div class="row d-lg-none" *ngIf="!loading && filteredProducts.length === 0">
  <div class="col-12 text-center">
    <div class="text-dark">
      <i class="fas fa-search fa-3x mb-3"></i>
      <h3>No products found</h3>
      <p *ngIf="searchTerm">No products match your search for "{{ searchTerm }}"</p>
      <p *ngIf="!searchTerm">Check back later for new products!</p>
    </div>
  </div>
</div>
