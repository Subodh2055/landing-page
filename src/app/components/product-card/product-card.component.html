<div class="product-card" [class.out-of-stock]="!product.isInStock()">
  <!-- Product Image -->
  <div class="product-image">
    <img [src]="product.getImageUrl()" [alt]="product.name" class="img-fluid" (error)="onImageError($event)">
    
    <!-- Action Buttons Overlay -->
    <div class="action-overlay">
      <div class="action-buttons">
        <button class="action-btn wishlist-btn" (click)="onAddToWishlist($event)" [class.active]="false">
          <i class="fas fa-heart"></i>
        </button>
        <button class="action-btn quick-view-btn" (click)="onQuickView($event)">
          <i class="fas fa-eye"></i>
        </button>
      </div>
    </div>

    <!-- Discount Badge -->
    <div class="discount-badge" *ngIf="hasDiscount()">
      -{{ getDiscountPercentage() }}%
    </div>

    <!-- Role Badge -->
    <div class="role-badge" [class]="getRoleBadgeClass()">
      <i class="fas fa-crown" *ngIf="product.role === 'admin'"></i>
      {{ getRoleBadgeText() }}
    </div>

    <!-- Stock Status Badge -->
    <div class="stock-badge" [class]="getStockStatusClass()">
      {{ getStockStatus() }}
    </div>
  </div>

  <!-- Product Info -->
  <div class="product-info">
    <!-- Category -->
    <div class="product-category">
      {{ product.category }}
    </div>

    <!-- Product Name -->
    <h3 class="product-name">{{ product.name }}</h3>

    <!-- Rating -->
    <div class="product-rating">
      <div class="stars">
        <span class="star" *ngFor="let star of getRatingStars().split('')" [class.filled]="star === 'â˜…'">
          {{ star }}
        </span>
      </div>
      <span class="rating-text">({{ getFormattedRating() }})</span>
      <span class="reviews-count">({{ product.reviews }} reviews)</span>
    </div>

    <!-- Price -->
    <div class="product-price">
      <span class="current-price">{{ getFormattedPrice() }}</span>
      <span class="original-price" *ngIf="hasDiscount()">{{ getOriginalPrice() }}</span>
    </div>

    <!-- Description -->
    <p class="product-description">{{ product.description }}</p>

    <!-- Action Buttons -->
    <div class="product-actions">
      <!-- Add to Cart Button -->
      <button class="btn btn-primary add-to-cart-btn" 
              [disabled]="!product.isInStock() || loading"
              [class.in-cart]="isInCart"
              (click)="onAddToCart($event)">
        <i class="fas fa-shopping-cart" *ngIf="!isInCart"></i>
        <i class="fas fa-check" *ngIf="isInCart"></i>
        <span>{{ getCartButtonText() }}</span>
      </button>

      <!-- Buy Now Button -->
      <button class="btn btn-success buy-now-btn" 
              [disabled]="!product.isInStock() || loading"
              (click)="onBuyNow($event)">
        <i class="fas fa-bolt"></i>
        <span>{{ getBuyNowButtonText() }}</span>
      </button>

      <!-- Quantity Controls (if in cart) -->
      <div class="quantity-controls" *ngIf="isInCart">
        <button class="btn btn-sm btn-outline-secondary" 
                (click)="onUpdateQuantity($event, cartQuantity - 1)"
                [disabled]="cartQuantity <= 1">
          <i class="fas fa-minus"></i>
        </button>
        <span class="quantity-display">{{ cartQuantity }}</span>
        <button class="btn btn-sm btn-outline-secondary" 
                (click)="onUpdateQuantity($event, cartQuantity + 1)"
                [disabled]="cartQuantity >= product.stock">
          <i class="fas fa-plus"></i>
        </button>
        <button class="btn btn-sm btn-outline-danger remove-btn" 
                (click)="onRemoveFromCart($event)">
          <i class="fas fa-trash"></i>
        </button>
      </div>
    </div>

    <!-- Admin Actions -->
    <div class="admin-actions" *ngIf="isAdmin()">
      <button class="btn btn-sm btn-warning edit-btn" (click)="onEditProduct($event)">
        <i class="fas fa-edit"></i> Edit
      </button>
      <button class="btn btn-sm btn-danger delete-btn" (click)="onDeleteProduct($event)">
        <i class="fas fa-trash"></i> Delete
      </button>
    </div>
  </div>
</div>
